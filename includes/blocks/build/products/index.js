(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.i18n,n=window.wp.blockEditor,l=window.wp.components,s=window.wp.data,a=window.wp.serverSideRender;var r=e.n(a);const d=window.ReactJSXRuntime,i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"knowledgebase/products","version":"3.0.0","title":"Knowledge Base Products","category":"design","icon":"products","keywords":["knowledgebase","kb","products"],"description":"Display sections under a selected product for the Knowledge Base","supports":{"html":false},"attributes":{"title":{"type":"string","default":""},"productId":{"type":"number","default":0},"depth":{"type":"number","default":0},"beforeLiItem":{"type":"string","default":""},"afterLiItem":{"type":"string","default":""}},"example":{},"textdomain":"knowledgebase","editorScript":"file:./index.js","editorStyle":"file:./index.css"}');(0,t.registerBlockType)(i.name,{...i,edit:function({attributes:e,setAttributes:t}){const a=(0,n.useBlockProps)(),{title:i,productId:c,depth:p,beforeLiItem:u,afterLiItem:b}=e,{products:g}=(0,s.useSelect)((e=>{const{getEntityRecords:t}=e("core");return{products:t("taxonomy","wzkb_product",{per_page:-1,orderby:"name",order:"asc",_fields:["id","name"]})}}),[]),w=g?[{value:0,label:(0,o.__)("Select a product","knowledgebase")},...g.map((e=>({value:e.id,label:e.name})))]:[{value:0,label:(0,o.__)("Loading...","knowledgebase")}];return c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.InspectorControls,{children:(0,d.jsxs)(l.PanelBody,{title:(0,o.__)("Settings","knowledgebase"),children:[(0,d.jsx)(l.TextControl,{label:(0,o.__)("Title","knowledgebase"),value:i,onChange:e=>t({title:e})}),(0,d.jsx)(l.SelectControl,{label:(0,o.__)("Product","knowledgebase"),value:c,options:w,onChange:e=>t({productId:parseInt(e)})}),(0,d.jsx)(l.RangeControl,{label:(0,o.__)("Max Depth","knowledgebase"),value:p,onChange:e=>t({depth:e}),min:0,max:10,help:(0,o.__)("0 for unlimited depth","knowledgebase")}),(0,d.jsx)(l.TextControl,{label:(0,o.__)("Before list item","knowledgebase"),value:u,onChange:e=>t({beforeLiItem:e}),help:(0,o.__)("HTML/text to add before each list item","knowledgebase")}),(0,d.jsx)(l.TextControl,{label:(0,o.__)("After list item","knowledgebase"),value:b,onChange:e=>t({afterLiItem:e}),help:(0,o.__)("HTML/text to add after each list item","knowledgebase")})]})}),(0,d.jsx)("div",{...a,children:(0,d.jsx)(l.Disabled,{children:(0,d.jsx)(r(),{block:"knowledgebase/products",attributes:e})})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.InspectorControls,{children:(0,d.jsxs)(l.PanelBody,{title:(0,o.__)("Settings","knowledgebase"),children:[(0,d.jsx)(l.TextControl,{label:(0,o.__)("Title","knowledgebase"),value:i,onChange:e=>t({title:e})}),(0,d.jsx)(l.SelectControl,{label:(0,o.__)("Product","knowledgebase"),value:c,options:w,onChange:e=>t({productId:parseInt(e)})})]})}),(0,d.jsx)("div",{...a,children:(0,d.jsx)(l.Placeholder,{icon:"products",label:(0,o.__)("Knowledge Base Products","knowledgebase"),instructions:(0,o.__)("Select a product to display its sections.","knowledgebase"),children:(0,d.jsx)(l.SelectControl,{value:c,options:w,onChange:e=>t({productId:parseInt(e)})})})})]})}})})();