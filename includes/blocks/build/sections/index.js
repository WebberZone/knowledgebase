(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=window.React,l=window.wp.i18n,o=window.wp.serverSideRender;var a=e.n(o);const r=window.wp.blockEditor,s=window.wp.data,i=window.wp.coreData,d=window.wp.components;(0,t.registerBlockType)("knowledgebase/sections",{edit:function({attributes:e,setAttributes:t}){const{termID:o,depth:c,beforeLiItem:w,afterLiItem:m}=e,b=(0,r.useBlockProps)(),{terms:p,hasResolved:g,error:u}=(0,s.useSelect)((e=>{const t=["taxonomy","wzkb_category",{per_page:-1,hide_empty:1}];try{return{terms:e(i.store).getEntityRecords(...t),hasResolved:e(i.store).hasFinishedResolution("getEntityRecords",t),error:null}}catch(e){return{terms:[],hasResolved:!0,error:e}}}),[]),_=p?.map((e=>({label:`${e.name} (#${e.id})`,value:e.id.toString()})))||[];return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.InspectorControls,null,u&&(0,n.createElement)(d.Notice,{status:"error",isDismissible:!1},(0,l.__)("Error loading categories. Please try again.","knowledgebase")),(0,n.createElement)(d.PanelBody,{title:(0,l.__)("Knowledge Base Sections Settings","knowledgebase"),initialOpen:!0},(0,n.createElement)(d.PanelRow,null,g?(0,n.createElement)(d.ComboboxControl,{label:(0,l.__)("Select Knowledge Base Section","knowledgebase"),value:o,onChange:e=>t({termID:e}),options:_,help:(0,l.__)("Search and select a knowledge base section","knowledgebase")}):(0,n.createElement)(d.Spinner,null)),(0,n.createElement)(d.PanelRow,null,(0,n.createElement)(d.TextControl,{label:(0,l.__)("Depth","knowledgebase"),value:c,type:"number",min:"0",onChange:e=>t({depth:e}),help:(0,l.__)("Enter the depth of sections to display (0 for all)","knowledgebase")})),(0,n.createElement)(d.PanelRow,null,(0,n.createElement)(d.TextControl,{label:(0,l.__)("Before list item","knowledgebase"),value:w,onChange:e=>t({beforeLiItem:e}),help:(0,l.__)("HTML/text to add before each list item","knowledgebase")})),(0,n.createElement)(d.PanelRow,null,(0,n.createElement)(d.TextControl,{label:(0,l.__)("After list item","knowledgebase"),value:m,onChange:e=>t({afterLiItem:e}),help:(0,l.__)("HTML/text to add after each list item","knowledgebase")})))),(0,n.createElement)("div",{...b},(0,n.createElement)(d.Disabled,null,(0,n.createElement)(a(),{block:"knowledgebase/sections",attributes:e}))))}})})();