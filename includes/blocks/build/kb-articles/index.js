(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=window.React,o=window.wp.i18n,l=window.wp.serverSideRender;var r=e.n(l);const a=window.wp.blockEditor,s=window.wp.data,i=window.wp.coreData,c=window.wp.components;(0,t.registerBlockType)("knowledgebase/articles",{edit:function({attributes:e,setAttributes:t}){const{termID:l,limit:d,showExcerpt:w}=e,p=(0,a.useBlockProps)(),{terms:b,hasResolved:m,error:g}=(0,s.useSelect)((e=>{const t=["taxonomy","wzkb_category",{per_page:-1}];try{return{terms:e(i.store).getEntityRecords(...t),hasResolved:e(i.store).hasFinishedResolution("getEntityRecords",t),error:null}}catch(e){return{terms:[],hasResolved:!0,error:e}}}),[]),u=b?.map((e=>({label:`${e.name} (#${e.id})`,value:e.id.toString()})))||[];return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(a.InspectorControls,null,g&&(0,n.createElement)(c.Notice,{status:"error",isDismissible:!1},(0,o.__)("Error loading categories. Please try again.","knowledgebase")),(0,n.createElement)(c.PanelBody,{title:(0,o.__)("Knowledge Base Articles Settings","knowledgebase"),initialOpen:!0},(0,n.createElement)(c.PanelRow,null,m?(0,n.createElement)(c.ComboboxControl,{label:(0,o.__)("Select Knowledge Base Section","knowledgebase"),value:l,onChange:e=>t({termID:e}),options:u,help:(0,o.__)("Search and select a knowledge base section","knowledgebase")}):(0,n.createElement)(c.Spinner,null)),(0,n.createElement)(c.PanelRow,null,(0,n.createElement)(c.TextControl,{label:(0,o.__)("Number of posts","knowledgebase"),value:d,type:"number",min:"1",onChange:e=>{const n=parseInt(e,10);t({limit:isNaN(n)||n<=0?5:n})},help:(0,o.__)("Enter the number of posts to display (default: 5)","knowledgebase")})),(0,n.createElement)(c.PanelRow,null,(0,n.createElement)(c.ToggleControl,{label:(0,o.__)("Show excerpt","knowledgebase"),help:w?(0,o.__)("Excerpt is displayed","knowledgebase"):(0,o.__)("No excerpt shown","knowledgebase"),checked:w,onChange:()=>t({showExcerpt:!w})})))),(0,n.createElement)("div",{...p},(0,n.createElement)(c.Disabled,null,(0,n.createElement)(r(),{block:"knowledgebase/articles",attributes:e}))))}})})();